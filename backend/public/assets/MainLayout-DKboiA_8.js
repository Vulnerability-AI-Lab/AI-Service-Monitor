import{d as I,u as N,q as T,s as V,c as L,a as s,b as o,w as e,t as a,v as O,x as _,y as m,f as n,o as C,T as q,z as E,g as G,A as P,_ as R}from"./index-D53lTjIk.js";import{u as W}from"./servers-CvzP1gNB.js";import{u as j}from"./websocket-Drby-LpX.js";const F={class:"main-layout"},H={class:"header"},J={class:"header-left"},K={class:"logo"},Q={class:"header-center"},X={class:"status-overview"},Y={class:"status-item"},Z={class:"status-value tech-number"},$={class:"status-item online"},ss={class:"status-value"},ts={class:"status-item warning"},os={class:"status-value"},es={class:"status-item error"},ns={class:"status-value"},as={class:"status-item offline"},ls={class:"status-value"},is={class:"header-right"},rs={class:"user-info"},us={class:"username"},ds={class:"main-content grid-bg"},cs=I({__name:"MainLayout",setup(_s){G();const p=N(),l=W(),u=j(),v=m(()=>p.user),i=m(()=>l.overview),f=m(()=>u.connected&&u.authenticated);function b(d){d==="logout"&&p.logout()}return T(async()=>{await Promise.all([l.fetchOverview(),l.fetchServers(),l.fetchGroups()]),u.connect();const d=setInterval(()=>{l.fetchOverview()},1e4);V(()=>{clearInterval(d),u.disconnect()})}),(d,t)=>{const x=n("Monitor"),r=n("el-icon"),y=n("Connection"),B=n("el-avatar"),M=n("ArrowDown"),U=n("User"),w=n("el-dropdown-item"),k=n("SwitchButton"),z=n("el-dropdown-menu"),A=n("el-dropdown"),D=n("router-view");return C(),L("div",F,[s("header",H,[s("div",J,[s("div",K,[o(r,{size:28,class:"logo-icon"},{default:e(()=>[o(x)]),_:1}),t[0]||(t[0]=s("span",{class:"logo-text"},"服务器监控中心",-1))])]),s("div",Q,[s("div",X,[s("div",Y,[t[1]||(t[1]=s("span",{class:"status-label"},"总计",-1)),s("span",Z,a(i.value.total),1)]),s("div",$,[t[2]||(t[2]=s("span",{class:"status-indicator online"},null,-1)),t[3]||(t[3]=s("span",{class:"status-label"},"在线",-1)),s("span",ss,a(i.value.online),1)]),s("div",ts,[t[4]||(t[4]=s("span",{class:"status-indicator warning"},null,-1)),t[5]||(t[5]=s("span",{class:"status-label"},"警告",-1)),s("span",os,a(i.value.warning),1)]),s("div",es,[t[6]||(t[6]=s("span",{class:"status-indicator error"},null,-1)),t[7]||(t[7]=s("span",{class:"status-label"},"异常",-1)),s("span",ns,a(i.value.error),1)]),s("div",as,[t[8]||(t[8]=s("span",{class:"status-indicator offline"},null,-1)),t[9]||(t[9]=s("span",{class:"status-label"},"离线",-1)),s("span",ls,a(i.value.offline),1)])])]),s("div",is,[s("span",{class:O(["connection-status",{connected:f.value}])},[o(r,null,{default:e(()=>[o(y)]),_:1}),_(" "+a(f.value?"已连接":"未连接"),1)],2),o(A,{onCommand:b},{dropdown:e(()=>[o(z,null,{default:e(()=>[o(w,{command:"profile"},{default:e(()=>[o(r,null,{default:e(()=>[o(U)]),_:1}),t[10]||(t[10]=_("个人信息 ",-1))]),_:1}),o(w,{command:"logout",divided:""},{default:e(()=>[o(r,null,{default:e(()=>[o(k)]),_:1}),t[11]||(t[11]=_("退出登录 ",-1))]),_:1})]),_:1})]),default:e(()=>{var c;return[s("div",rs,[o(B,{size:32,class:"avatar"},{default:e(()=>{var h,g,S;return[_(a((S=(g=(h=v.value)==null?void 0:h.username)==null?void 0:g[0])==null?void 0:S.toUpperCase()),1)]}),_:1}),s("span",us,a((c=v.value)==null?void 0:c.username),1),o(r,null,{default:e(()=>[o(M)]),_:1})])]}),_:1})])]),s("main",ds,[o(D,null,{default:e(({Component:c})=>[o(q,{name:"fade",mode:"out-in"},{default:e(()=>[(C(),E(P(c)))]),_:2},1024)]),_:1})])])}}}),fs=R(cs,[["__scopeId","data-v-2f37ce33"]]);export{fs as default};
